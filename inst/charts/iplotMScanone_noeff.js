// Generated by CoffeeScript 1.7.1
var iplotMScanone_noeff, mylodchart;

mylodchart = null;

iplotMScanone_noeff = function(lod_data, chartOpts) {
  var axispos, chrGap, colors, darkrect, g_heatmap, g_lodchart, hbot, htop, lightrect, linecolor, linewidth, margin, mylodheatmap, svg, titlepos, totalh, totalw, width, zlim, zthresh, _ref, _ref1, _ref10, _ref11, _ref12, _ref13, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;
  width = (_ref = chartOpts != null ? chartOpts.width : void 0) != null ? _ref : 850;
  htop = (_ref1 = chartOpts != null ? chartOpts.htop : void 0) != null ? _ref1 : 350;
  hbot = (_ref2 = chartOpts != null ? chartOpts.hbot : void 0) != null ? _ref2 : 350;
  margin = (_ref3 = chartOpts != null ? chartOpts.margin : void 0) != null ? _ref3 : {
    left: 60,
    top: 40,
    right: 40,
    bottom: 40,
    inner: 5
  };
  axispos = (_ref4 = chartOpts != null ? chartOpts.axispos : void 0) != null ? _ref4 : {
    xtitle: 25,
    ytitle: 30,
    xlabel: 5,
    ylabel: 5
  };
  titlepos = (_ref5 = chartOpts != null ? chartOpts.titlepos : void 0) != null ? _ref5 : 20;
  chrGap = (_ref6 = chartOpts != null ? chartOpts.chrGap : void 0) != null ? _ref6 : 5;
  darkrect = (_ref7 = chartOpts != null ? chartOpts.darkrect : void 0) != null ? _ref7 : d3.rgb(200, 200, 200);
  lightrect = (_ref8 = chartOpts != null ? chartOpts.lightrect : void 0) != null ? _ref8 : d3.rgb(230, 230, 230);
  colors = (_ref9 = chartOpts != null ? chartOpts.colors : void 0) != null ? _ref9 : ["slateblue", "white", "crimson"];
  zlim = (_ref10 = chartOpts != null ? chartOpts.zlim : void 0) != null ? _ref10 : null;
  zthresh = (_ref11 = chartOpts != null ? chartOpts.zthresh : void 0) != null ? _ref11 : null;
  linecolor = (_ref12 = chartOpts != null ? chartOpts.linecolor : void 0) != null ? _ref12 : "darkslateblue";
  linewidth = (_ref13 = chartOpts != null ? chartOpts.linewidth : void 0) != null ? _ref13 : 2;
  totalh = htop + hbot + 2 * (margin.top + margin.bottom);
  totalw = width + margin.left + margin.right;
  mylodheatmap = lodheatmap().height(htop).width(width).margin(margin).axispos(axispos).titlepos(titlepos).chrGap(chrGap).rectcolor(lightrect).colors(colors).zlim(zlim).zthresh(zthresh);
  svg = d3.select("div#chart").append("svg").attr("height", totalh).attr("width", totalw);
  g_heatmap = svg.append("g").attr("id", "heatmap").datum(lod_data).call(mylodheatmap);
  mylodchart = lodchart().height(hbot).width(width).margin(margin).axispos(axispos).titlepos(titlepos).chrGap(chrGap).linecolor("none").pad4heatmap(true).darkrect(darkrect).lightrect(lightrect).ylim([0, d3.max(mylodheatmap.zlim())]).plotAll(true);
  g_lodchart = svg.append("g").attr("transform", "translate(0," + (htop + margin.top + margin.bottom) + ")").attr("id", "lodchart").datum(lod_data).call(mylodchart);
  return mylodheatmap.cellSelect().on("mouseover", function(d) {
    return g_lodchart.selectAll("path.lodcurve" + d.lodindex).attr("opacity", 1).attr("stroke", linecolor);
  }).on("mouseout", function(d) {
    return g_lodchart.selectAll("path.lodcurve" + d.lodindex).attr("opacity", 0);
  });
};
